<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui,viewport-fit=cover">
    <meta name=apple-mobile-web-app-capable content=yes>
    <meta name=apple-mobile-web-app-status-bar-style content=black>
    <title>StreamDeckTest2 Settings</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/barraider/streamdeck-easypi@latest/src/sdpi.css">
    <script src="https://cdn.jsdelivr.net/gh/barraider/streamdeck-easypi@latest/src/sdtools.common.js"></script>
    <script src="PluginActionPI.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
            integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8="
            crossorigin="anonymous"></script>
</head>
<body>
    <div class="sdpi-wrapper">
        <div class="sdpi-item" id="visualizer_mode_select">
            <div class="sdpi-item-label">Visualizer Mode</div>
            <select class="sdProperty sdpi-item-value select" id="visualizer_mode" oninput="setSettings()" onchange="onSelectionChange()">
                <option value="GreenBars">Green Bars</option>
                <option value="CustomColor">Custom Color</option>
                <option value="Gradient">Gradient</option>
            </select>
        </div>

        <div class="sdpi-item" id="custom_color_select">
            <div class="sdpi-item-label">Custom Color</div>
            <select class="sdProperty sdpi-item-value select" id="custom_color" oninput="setSettings()">
                <option value="AliceBlue">AliceBlue</option>
                <option value="AntiqueWhite">AntiqueWhite</option>
                <option value="Aqua">Aqua</option>
                <option value="Aquamarine">Aquamarine</option>
                <option value="Azure">Azure</option>
                <option value="Beige">Beige</option>
                <option value="Bisque">Bisque</option>
                <option value="Black">Black</option>
                <option value="BlanchedAlmond">BlanchedAlmond</option>
                <option value="Blue">Blue</option>
                <option value="BlueViolet">BlueViolet</option>
                <option value="Brown">Brown</option>
                <option value="BurlyWood">BurlyWood</option>
                <option value="CadetBlue">CadetBlue</option>
                <option value="Chartreuse">Chartreuse</option>
                <option value="Chocolate">Chocolate</option>
                <option value="Coral">Coral</option>
                <option value="CornflowerBlue">CornflowerBlue</option>
                <option value="Cornsilk">Cornsilk</option>
                <option value="Crimson">Crimson</option>
                <option value="Cyan">Cyan</option>
                <option value="DarkBlue">DarkBlue</option>
                <option value="DarkCyan">DarkCyan</option>
                <option value="DarkGoldenrod">DarkGoldenrod</option>
                <option value="DarkGray">DarkGray</option>
                <option value="DarkGreen">DarkGreen</option>
                <option value="DarkKhaki">DarkKhaki</option>
                <option value="DarkMagenta">DarkMagenta</option>
                <option value="DarkOliveGreen">DarkOliveGreen</option>
                <option value="DarkOrange">DarkOrange</option>
                <option value="DarkOrchid">DarkOrchid</option>
                <option value="DarkRed">DarkRed</option>
                <option value="DarkSalmon">DarkSalmon</option>
                <option value="DarkSeaGreen">DarkSeaGreen</option>
                <option value="DarkSlateBlue">DarkSlateBlue</option>
                <option value="DarkSlateGray">DarkSlateGray</option>
                <option value="DarkTurquoise">DarkTurquoise</option>
                <option value="DarkViolet">DarkViolet</option>
                <option value="DeepPink">DeepPink</option>
                <option value="DeepSkyBlue">DeepSkyBlue</option>
                <option value="DimGray">DimGray</option>
                <option value="DodgerBlue">DodgerBlue</option>
                <option value="Firebrick">Firebrick</option>
                <option value="FloralWhite">FloralWhite</option>
                <option value="ForestGreen">ForestGreen</option>
                <option value="Fuchsia">Fuchsia</option>
                <option value="Gainsboro">Gainsboro</option>
                <option value="GhostWhite">GhostWhite</option>
                <option value="Gold">Gold</option>
                <option value="Goldenrod">Goldenrod</option>
                <option value="Gray">Gray</option>
                <option value="Green">Green</option>
                <option value="GreenYellow">GreenYellow</option>
                <option value="Honeydew">Honeydew</option>
                <option value="HotPink">HotPink</option>
                <option value="IndianRed">IndianRed</option>
                <option value="Indigo">Indigo</option>
                <option value="Ivory">Ivory</option>
                <option value="Khaki">Khaki</option>
                <option value="Lavender">Lavender</option>
                <option value="LavenderBlush">LavenderBlush</option>
                <option value="LawnGreen">LawnGreen</option>
                <option value="LemonChiffon">LemonChiffon</option>
                <option value="LightBlue">LightBlue</option>
                <option value="LightCoral">LightCoral</option>
                <option value="LightCyan">LightCyan</option>
                <option value="LightGoldenrodYellow">LightGoldenrodYellow</option>
                <option value="LightGray">LightGray</option>
                <option value="LightGreen">LightGreen</option>
                <option value="LightPink">LightPink</option>
                <option value="LightSalmon">LightSalmon</option>
                <option value="LightSeaGreen">LightSeaGreen</option>
                <option value="LightSkyBlue">LightSkyBlue</option>
                <option value="LightSlateGray">LightSlateGray</option>
                <option value="LightSteelBlue">LightSteelBlue</option>
                <option value="LightYellow">LightYellow</option>
                <option value="Lime">Lime</option>
                <option value="LimeGreen">LimeGreen</option>
                <option value="Linen">Linen</option>
                <option value="Magenta">Magenta</option>
                <option value="Maroon">Maroon</option>
                <option value="MediumAquamarine">MediumAquamarine</option>
                <option value="MediumBlue">MediumBlue</option>
                <option value="MediumOrchid">MediumOrchid</option>
                <option value="MediumPurple">MediumPurple</option>
                <option value="MediumSeaGreen">MediumSeaGreen</option>
                <option value="MediumSlateBlue">MediumSlateBlue</option>
                <option value="MediumSpringGreen">MediumSpringGreen</option>
                <option value="MediumTurquoise">MediumTurquoise</option>
                <option value="MediumVioletRed">MediumVioletRed</option>
                <option value="MidnightBlue">MidnightBlue</option>
                <option value="MintCream">MintCream</option>
                <option value="MistyRose">MistyRose</option>
                <option value="Moccasin">Moccasin</option>
                <option value="NavajoWhite">NavajoWhite</option>
                <option value="Navy">Navy</option>
                <option value="OldLace">OldLace</option>
                <option value="Olive">Olive</option>
                <option value="OliveDrab">OliveDrab</option>
                <option value="Orange">Orange</option>
                <option value="OrangeRed">OrangeRed</option>
                <option value="Orchid">Orchid</option>
                <option value="PaleGoldenrod">PaleGoldenrod</option>
                <option value="PaleGreen">PaleGreen</option>
                <option value="PaleTurquoise">PaleTurquoise</option>
                <option value="PaleVioletRed">PaleVioletRed</option>
                <option value="PapayaWhip">PapayaWhip</option>
                <option value="PeachPuff">PeachPuff</option>
                <option value="Peru">Peru</option>
                <option value="Pink">Pink</option>
                <option value="Plum">Plum</option>
                <option value="PowderBlue">PowderBlue</option>
                <option value="Purple">Purple</option>
                <option value="Red">Red</option>
                <option value="RosyBrown">RosyBrown</option>
                <option value="RoyalBlue">RoyalBlue</option>
                <option value="SaddleBrown">SaddleBrown</option>
                <option value="Salmon">Salmon</option>
                <option value="SandyBrown">SandyBrown</option>
                <option value="SeaGreen">SeaGreen</option>
                <option value="SeaShell">SeaShell</option>
                <option value="Sienna">Sienna</option>
                <option value="Silver">Silver</option>
                <option value="SkyBlue">SkyBlue</option>
                <option value="SlateBlue">SlateBlue</option>
                <option value="SlateGray">SlateGray</option>
                <option value="Snow">Snow</option>
                <option value="SpringGreen">SpringGreen</option>
                <option value="SteelBlue">SteelBlue</option>
                <option value="Tan">Tan</option>
                <option value="Teal">Teal</option>
                <option value="Thistle">Thistle</option>
                <option value="Tomato">Tomato</option>
                <option value="Turquoise">Turquoise</option>
                <option value="Violet">Violet</option>
                <option value="Wheat">Wheat</option>
                <option value="White">White</option>
                <option value="WhiteSmoke">WhiteSmoke</option>
                <option value="Yellow">Yellow</option>
                <option value="YellowGreen">YellowGreen</option>
            </select>
        </div>

        <div class="sdpi-item" id="gradient_color_select">
            <div class="sdpi-item-label">Custom Color</div>
            <select class="sdProperty sdpi-item-value select" id="gradient_color" oninput="setSettings()">
                <option value="AliceBlue">AliceBlue</option>
                <option value="AntiqueWhite">AntiqueWhite</option>
                <option value="Aqua">Aqua</option>
                <option value="Aquamarine">Aquamarine</option>
                <option value="Azure">Azure</option>
                <option value="Beige">Beige</option>
                <option value="Bisque">Bisque</option>
                <option value="Black">Black</option>
                <option value="BlanchedAlmond">BlanchedAlmond</option>
                <option value="Blue">Blue</option>
                <option value="BlueViolet">BlueViolet</option>
                <option value="Brown">Brown</option>
                <option value="BurlyWood">BurlyWood</option>
                <option value="CadetBlue">CadetBlue</option>
                <option value="Chartreuse">Chartreuse</option>
                <option value="Chocolate">Chocolate</option>
                <option value="Coral">Coral</option>
                <option value="CornflowerBlue">CornflowerBlue</option>
                <option value="Cornsilk">Cornsilk</option>
                <option value="Crimson">Crimson</option>
                <option value="Cyan">Cyan</option>
                <option value="DarkBlue">DarkBlue</option>
                <option value="DarkCyan">DarkCyan</option>
                <option value="DarkGoldenrod">DarkGoldenrod</option>
                <option value="DarkGray">DarkGray</option>
                <option value="DarkGreen">DarkGreen</option>
                <option value="DarkKhaki">DarkKhaki</option>
                <option value="DarkMagenta">DarkMagenta</option>
                <option value="DarkOliveGreen">DarkOliveGreen</option>
                <option value="DarkOrange">DarkOrange</option>
                <option value="DarkOrchid">DarkOrchid</option>
                <option value="DarkRed">DarkRed</option>
                <option value="DarkSalmon">DarkSalmon</option>
                <option value="DarkSeaGreen">DarkSeaGreen</option>
                <option value="DarkSlateBlue">DarkSlateBlue</option>
                <option value="DarkSlateGray">DarkSlateGray</option>
                <option value="DarkTurquoise">DarkTurquoise</option>
                <option value="DarkViolet">DarkViolet</option>
                <option value="DeepPink">DeepPink</option>
                <option value="DeepSkyBlue">DeepSkyBlue</option>
                <option value="DimGray">DimGray</option>
                <option value="DodgerBlue">DodgerBlue</option>
                <option value="Firebrick">Firebrick</option>
                <option value="FloralWhite">FloralWhite</option>
                <option value="ForestGreen">ForestGreen</option>
                <option value="Fuchsia">Fuchsia</option>
                <option value="Gainsboro">Gainsboro</option>
                <option value="GhostWhite">GhostWhite</option>
                <option value="Gold">Gold</option>
                <option value="Goldenrod">Goldenrod</option>
                <option value="Gray">Gray</option>
                <option value="Green">Green</option>
                <option value="GreenYellow">GreenYellow</option>
                <option value="Honeydew">Honeydew</option>
                <option value="HotPink">HotPink</option>
                <option value="IndianRed">IndianRed</option>
                <option value="Indigo">Indigo</option>
                <option value="Ivory">Ivory</option>
                <option value="Khaki">Khaki</option>
                <option value="Lavender">Lavender</option>
                <option value="LavenderBlush">LavenderBlush</option>
                <option value="LawnGreen">LawnGreen</option>
                <option value="LemonChiffon">LemonChiffon</option>
                <option value="LightBlue">LightBlue</option>
                <option value="LightCoral">LightCoral</option>
                <option value="LightCyan">LightCyan</option>
                <option value="LightGoldenrodYellow">LightGoldenrodYellow</option>
                <option value="LightGray">LightGray</option>
                <option value="LightGreen">LightGreen</option>
                <option value="LightPink">LightPink</option>
                <option value="LightSalmon">LightSalmon</option>
                <option value="LightSeaGreen">LightSeaGreen</option>
                <option value="LightSkyBlue">LightSkyBlue</option>
                <option value="LightSlateGray">LightSlateGray</option>
                <option value="LightSteelBlue">LightSteelBlue</option>
                <option value="LightYellow">LightYellow</option>
                <option value="Lime">Lime</option>
                <option value="LimeGreen">LimeGreen</option>
                <option value="Linen">Linen</option>
                <option value="Magenta">Magenta</option>
                <option value="Maroon">Maroon</option>
                <option value="MediumAquamarine">MediumAquamarine</option>
                <option value="MediumBlue">MediumBlue</option>
                <option value="MediumOrchid">MediumOrchid</option>
                <option value="MediumPurple">MediumPurple</option>
                <option value="MediumSeaGreen">MediumSeaGreen</option>
                <option value="MediumSlateBlue">MediumSlateBlue</option>
                <option value="MediumSpringGreen">MediumSpringGreen</option>
                <option value="MediumTurquoise">MediumTurquoise</option>
                <option value="MediumVioletRed">MediumVioletRed</option>
                <option value="MidnightBlue">MidnightBlue</option>
                <option value="MintCream">MintCream</option>
                <option value="MistyRose">MistyRose</option>
                <option value="Moccasin">Moccasin</option>
                <option value="NavajoWhite">NavajoWhite</option>
                <option value="Navy">Navy</option>
                <option value="OldLace">OldLace</option>
                <option value="Olive">Olive</option>
                <option value="OliveDrab">OliveDrab</option>
                <option value="Orange">Orange</option>
                <option value="OrangeRed">OrangeRed</option>
                <option value="Orchid">Orchid</option>
                <option value="PaleGoldenrod">PaleGoldenrod</option>
                <option value="PaleGreen">PaleGreen</option>
                <option value="PaleTurquoise">PaleTurquoise</option>
                <option value="PaleVioletRed">PaleVioletRed</option>
                <option value="PapayaWhip">PapayaWhip</option>
                <option value="PeachPuff">PeachPuff</option>
                <option value="Peru">Peru</option>
                <option value="Pink">Pink</option>
                <option value="Plum">Plum</option>
                <option value="PowderBlue">PowderBlue</option>
                <option value="Purple">Purple</option>
                <option value="Red">Red</option>
                <option value="RosyBrown">RosyBrown</option>
                <option value="RoyalBlue">RoyalBlue</option>
                <option value="SaddleBrown">SaddleBrown</option>
                <option value="Salmon">Salmon</option>
                <option value="SandyBrown">SandyBrown</option>
                <option value="SeaGreen">SeaGreen</option>
                <option value="SeaShell">SeaShell</option>
                <option value="Sienna">Sienna</option>
                <option value="Silver">Silver</option>
                <option value="SkyBlue">SkyBlue</option>
                <option value="SlateBlue">SlateBlue</option>
                <option value="SlateGray">SlateGray</option>
                <option value="Snow">Snow</option>
                <option value="SpringGreen">SpringGreen</option>
                <option value="SteelBlue">SteelBlue</option>
                <option value="Tan">Tan</option>
                <option value="Teal">Teal</option>
                <option value="Thistle">Thistle</option>
                <option value="Tomato">Tomato</option>
                <option value="Turquoise">Turquoise</option>
                <option value="Violet">Violet</option>
                <option value="Wheat">Wheat</option>
                <option value="White">White</option>
                <option value="WhiteSmoke">WhiteSmoke</option>
                <option value="Yellow">Yellow</option>
                <option value="YellowGreen">YellowGreen</option>
            </select>
        </div>

        <div class="sdpi-item" id="visualizer_device_select">
            <div class="sdpi-item-label">Monitor Device</div>
            <select class="sdProperty sdpi-item-value select" id="visualizer_device" oninput="setSettings()">
            </select>
        </div>
    </div>
</body>

<script>
    function onSelectionChange() {
        let mode = $('#visualizer_mode').val();

        if (mode == 'CustomColor') {
            $('#custom_color_select').show();
            $('#gradient_color_select').hide();
        }
        else if (mode == 'Gradient') {
            $('#custom_color_select').show();
            $('#gradient_color_select').show();
        }
        else {
            $('#custom_color_select').hide();
            $('#gradient_color_select').hide();
        }
    }

    function pollForControls() {
        if (websocket == null) {
            setTimeout(pollForControls, 100);
        }
        else {
            onSelectionChange();
        }
    }

    pollForControls();

    document.addEventListener('websocketCreate', function () {
        websocket.addEventListener('message', function (event) {
            console.log("Got message event!", event.data);

            let message = JSON.parse(event.data);

            if (message.event == "sendToPropertyInspector") {
                //let payload = JSON.parse(message.payload);
                console.log("payload", message.payload);

                $('#visualizer_device').children().remove().end();

                $('#visualizer_device').append('<option value="">Default Output Device</option>');

                message.payload.DeviceList.forEach((element) => {
                    $('#visualizer_device').append('<option value="' + element.ID + '">' + element.Name + '</option>');
                });
            }
        });

        sendPayloadToPlugin({
            action: "getAudioDevices"
        });
    });

</script>
</html>
